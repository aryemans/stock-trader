{"ast":null,"code":"var _jsxFileName = \"/Users/aryemans/stock-trader/stock-trader-backend/stock-trader-backend/ClientApp/src/components/BuyStock.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport './BuyStock.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction BuyStock() {\n  _s();\n\n  const navigate = useNavigate();\n  const cookies = new Cookies();\n  const userRole = cookies.get('UserRole');\n  const [quantity, setQuantity] = useState('');\n  const [price, setPrice] = useState('');\n  const [limitPrice, setLimitPrice] = useState('');\n  const [expireDate, setExpireDate] = useState('');\n  const {\n    stock\n  } = useParams();\n  useEffect(() => {\n    const fetchPriceData = async () => {\n      const response = await fetch(`/market/current-price/${stock}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n\n      if (response.ok) {\n        alert('Got prices');\n      } else {\n        alert(data.message);\n      }\n\n      setPrice(data.current_price);\n      console.log(stock);\n    };\n\n    fetchPriceData();\n  }, []);\n\n  const handleBuy = async () => {\n    const response = await fetch(`/users/buy-stock/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        stock_ticker: stock,\n        volume: parseInt(quantity)\n      })\n    });\n    const data = await response.json();\n\n    if (response.ok) {\n      alert('Stock bought successfully!');\n      console.log(data);\n      navigate('/portfolio');\n    } else {\n      alert(data.message);\n    }\n  };\n\n  const handleSetLimitOrder = async () => {\n    const response = await fetch(`/users/limit-order-buy`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        stock_ticker: stock,\n        current_price: limitPrice,\n        volume: parseInt(quantity),\n        expire_date: expireDate\n      })\n    });\n    const data = await response.json(); // handle success or error\n\n    if (response.ok) {\n      alert('Limit order set successfully!');\n      navigate('/limit-orders');\n    } else {\n      alert(data.message);\n    }\n  };\n\n  if (userRole === \"user\") {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\" \", stock, \" \", price, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Buy Stock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Quantity:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: quantity,\n            onChange: event => setQuantity(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleBuy,\n          children: \"Buy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Set Limit Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Quantity:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: quantity,\n            onChange: event => setQuantity(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Price:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: limitPrice,\n            onChange: event => setLimitPrice(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Expire Date:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: expireDate,\n            onChange: e => setExpireDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSetLimitOrder,\n          children: \"Set Limit Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this);\n  } else {\n    navigate(\"/login\");\n  }\n}\n\n_s(BuyStock, \"RYydlHc2IkBxzaba+YxfX4LVVMQ=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = BuyStock;\nexport default BuyStock;\n\nvar _c;\n\n$RefreshReg$(_c, \"BuyStock\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","Cookies","BuyStock","navigate","cookies","userRole","get","quantity","setQuantity","price","setPrice","limitPrice","setLimitPrice","expireDate","setExpireDate","stock","fetchPriceData","response","fetch","method","headers","data","json","ok","alert","message","current_price","console","log","handleBuy","body","JSON","stringify","stock_ticker","volume","parseInt","handleSetLimitOrder","expire_date","event","target","value","e"],"sources":["/Users/aryemans/stock-trader/stock-trader-backend/stock-trader-backend/ClientApp/src/components/BuyStock.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport './BuyStock.css';\n\nfunction BuyStock() {\n    const navigate = useNavigate();\n    const cookies = new Cookies();\n    const userRole = cookies.get('UserRole');\n    const [quantity, setQuantity] = useState('');\n    const [price, setPrice] = useState('');\n    const [limitPrice, setLimitPrice] = useState('');\n    const [expireDate, setExpireDate] = useState('');\n    const {stock} = useParams();\n\n    useEffect(() => {\n        const fetchPriceData = async () => {\n            const response = await fetch(`/market/current-price/${stock}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            const data = await response.json();\n            if (response.ok) {\n                alert('Got prices');\n            } else {\n                alert(data.message);\n            }\n            setPrice(data.current_price);\n            console.log(stock);\n        };\n        fetchPriceData();\n    }, []);\n    \n    \n    const handleBuy = async () => {\n        const response = await fetch(`/users/buy-stock/`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                stock_ticker: stock,\n                volume: parseInt(quantity)\n            })\n        });\n        const data = await response.json();\n        if (response.ok) {\n            alert('Stock bought successfully!');\n            console.log(data);\n            navigate('/portfolio');\n        } else {\n            alert(data.message);\n        }\n    };\n\n    const handleSetLimitOrder = async () => {\n        const response = await fetch(`/users/limit-order-buy`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                stock_ticker: stock,\n                current_price: limitPrice,\n                volume: parseInt(quantity),\n                expire_date: expireDate     \n            })\n        });\n        const data = await response.json();\n        // handle success or error\n        if (response.ok) {\n            alert('Limit order set successfully!');\n            navigate('/limit-orders');\n        } else {\n            alert(data.message);\n        }\n    }; \n\n    if(userRole === \"user\") {\n    return (\n        <div>\n        <h1> {stock} {price} </h1>\n        <h2>Buy Stock</h2>\n        <form>\n            <label>\n                Quantity:\n      <input\n                    type=\"number\"\n                    value={quantity}\n                    onChange={(event) => setQuantity(event.target.value)}\n                />\n            </label>\n            <br />\n            <button onClick={handleBuy}>Buy</button>\n        </form>\n        <br />\n        <hr />\n        <h2>Set Limit Order</h2>\n        <form>\n            <br />\n            <label>\n                Quantity:\n      <input\n                    type=\"number\"\n                    value={quantity}\n                    onChange={(event) => setQuantity(event.target.value)}\n                />\n            </label>\n            <label>\n                Price:\n      <input\n                    type=\"number\"\n                    value={limitPrice}\n                    onChange={(event) => setLimitPrice(event.target.value)}\n                />\n            </label>\n            <label>\n                Expire Date:\n      <input \n                    type=\"date\"\n                    value={expireDate} \n                    onChange={e => setExpireDate(e.target.value)} \n                />\n            </label>\n            <br />\n            <button onClick={handleSetLimitOrder}>Set Limit Order</button>\n        </form>\n    </div>\n    );\n    } else {\n        navigate(\"/login\");\n    }\n}\n\nexport default BuyStock;"],"mappings":"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"},"metadata":{},"sourceType":"module"}